<!-- TOC -->

- [沃看看程序版本说明文档](#沃看看程序版本说明文档)
    - [前言](#前言)
    - [程序版本分布表](#程序版本分布表)
    - [程序文件前缀含义表](#程序文件前缀含义表)
    - [bin文件硬件版本号含义表](#bin文件硬件版本号含义表)
    - [更新说明-主程序APP部分](#更新说明-主程序app部分)
    - [更新说明-BootLoader部分](#更新说明-bootloader部分)

<!-- /TOC -->


# 沃看看程序版本说明文档
## 前言
+ 此文档为沃看看添加摄像头项目的程序版本说明文档.
+ 沃看看项目支持远程升级,程序分为BootLoader和APP两个部分,提交生产和测试的程序文件为两者的合并而来,因此此文档中"更新说明"分为两个部分.
+ 通过此文档方便开发和测试人员快速的查阅棚室产品的程序版本信息和变动.
---


## 程序版本分布表

|主程序版本号<br>Wokankan-L151RC-Camera-Merge|固件版本号<br>H硬件版本S软件版本| 用户app版本号<br>Wokankan-L151RC-Camera|BootLoader版本号<br>Wokankan-L151RC-BootLoader| 备注 |
|:-:|:-:|:-:|:-:|:-:|
| V0.0.1.2020.04.11 |H0003S20000005|[V0.0.1.2020.04.11](#APP-V0.0.1.2020.04.11)|[V0.0.2.2020.03.31](#boot-V0.0.2.2020.03.31)||
| V0.0.1.2020.04.16 |H0003S20000006|[V0.0.1.2020.04.16](#APP-V0.0.1.2020.04.16)|[V0.0.2.2020.04.16](#boot-V0.0.2.2020.04.16)||
| V0.0.1.2020.04.24 |H0003S20000007|[V0.0.1.2020.04.24](#APP-V0.0.1.2020.04.24)|[V0.0.2.2020.04.16](#boot-V0.0.2.2020.04.16)||
| V0.0.1.2020.04.28 |H0003S20000008|[V0.0.1.2020.04.28](#APP-V0.0.1.2020.04.28)|[V0.0.2.2020.04.16](#boot-V0.0.2.2020.04.16)|修复了错误代码39的问题|

## 程序文件前缀含义表

|前缀缩写|前缀含义|备注|
|:-:|:-:|:-:|
|FlowWater|表示程序连接的产品为"Flow_Water_TJ"||
|Release|表示程序连接的产品为"沃看看_release"||
|Beta|表示程序连接的产品为"沃看看_beta"||
|M6313|表示程序适配的模组为中移物联的M6313||
|G500|表示程序适配的模组为广和通G500||

+ 实际程序文件命名示例:
***FlowWater_G500_Wokankan-L151RC-Camera-Merge-V0.0.1.2020.04.28.hex***
"FlowWater"表示烧写此固件后设备将连接"Flow_Water_TJ"这个产品.
"G500"表示此固件运行在采用G500模组的硬件上.
"Wokankan-L151RC-Camera-Merge"表示此程序文件既包含BootLoader又包含app为两者的合并固件.
"V0.0.1.2020.04.28"表示固件的具体版本号.


## bin文件硬件版本号含义表

|硬件版本号|版本电阻|说明|备注|
|:-:|:-:|:-:|:-:|
|H0001|100K|PCB0.5+M6313模组|第一批小批量200块|
|H0002|91K|PCB0.6+G500模组|
|H0003|82K|PCB0.5+M6313模组|

+ 从V0.0.1.2020.04.11版本开始,一个程序同时支持PCB0.5和PCB0.6,程序自动根据版本电阻判断电路板的硬件版本并调用对用的功能驱动,但是更换模组类型程序不能兼容,必须烧写对应模组的程序.

---


## 更新说明-主程序APP部分
> Wokankan-L151RC-V0.0.1.2019.06.30
+ 沃看看项目用户APP第一版提交测试程序.

> Wokankan-L151RC-V0.0.1.2019.07.02
+ 修改调试连接的单位,由之前交互协议中的秒修改为分钟,提高了允许建立调试连接的时长.
+ 调试连接的计时由之前的仅仅唤醒计时修改为除关机/手动重启/升级等特殊操作之外都正常计时的机制.
+ 去除设备重启后初始化控制变量时对上报控制变量的初始化的语句,此语句导致自动重启也会上报所有类型的数据.
+ 设备读保护功能由之前的BootLoader开启设置为主程序中开启.
+ 修复一个设备刚上电时进入透传模式不正常的bug.
+ 修复设备第一次烧写程序后读取设备ID为全0的bug.

> Wokankan-L151RC-V0.0.1.2019.07.04
+ 测试开始测试tag.

> Wokankan-L151RC-V0.0.1.2019.07.13
+ 修复设备不能屏蔽平台下发的错误白天时间间隔设置的bug.
+ 修改充电电流计算公式中电池标称电压从8400修改为7400.

> Wokankan-L151RC-V0.0.1.2019.07.15
+ 修改设备上电第一次上报errCode为0xFF(无错误),errCode的值一般是上一次设备上报过程中的检测到的错误状态信息.
+ 针对ID没有修改但是Sec修改的情况,修改设备存储设备ID和Sec到Flash中的机制为修改任何一个参数都触发存Flash.
+ 修改充电电流检测的逻辑,提高精度,仅仅统计太阳能充电的充电量,不再统计直流充电端口的充电量.
+ 修改唤醒计时器的处理逻辑,修复在充电状态下调试时间计时不准确的bug.

> Wokankan-L151RC-V0.0.1.2019.07.18
+ 增大接受平台设置参数的数据包的长度,由之前的512字节增大到1024字节.
+ 修复设置上报间隔为5秒时设备传感器通讯异常的bug.
+ 修改设备中断优先级,防止出现空气温度数据不能正常取出的问题.
+ 上报数据类型微调,部分参数由上报数据迁移到上报基础信息处理,具体参见"程序说明_程序自测文档V4".
+ GPS第一次上电信息获取失败后上报0不再上报虚拟位置的经纬度.
+ 上报基础信息由上报变化量修改为上报所有设置数据.

> Wokankan-L151RC-V0.0.1.2019.07.19
+ 通过判断下发的设置包的时间戳保证设备在一次连接平台时接收到多个设置包时只对最新的设置包生效.

> Wokankan-L151RC-V0.0.1.2019.07.24
+ 未注册设备上报间隔由固定时间修改为设备设置为未注册,之后最近一次上报节点往后数24小时.避免所有未注册设备集中上报.

> Wokankan-L151RC-V0.0.1.2019.07.26
+ 修复flash发生错误时显示错误代码为50而不是设计的51的bug.
+ 为了便于车间质检方便,在设备检测到从未设置设备信息状态到第一次设置DevID和DevSec时设备将在回复设置成功后自动重启,启用新设置的设备信息.
+ 根据上位机需求,修改上报机制为无任何报警变化则只报数据,如果有任何报警则上报所有报警和数据.

> Wokankan-L151RC-V0.0.1.2019.07.29
+ 添加错误代码49,表示存储设置参数发生错误,当设备检测到设置存储错误时将在屏幕显示此参数并上报平台.
+ 底层片上eeprom驱动添加对写入数据时对错误标志位的处理.
+ 优化平台下发数据的SDK调用逻辑,提高程序运行的效率.

> Wokankan-L151RC-V0.0.1.2019.08.01
+ 修复设备自动重启后屏幕不能马上恢复重启之前的现象的bug.

> Wokankan-L151RC-V0.0.1.2019.11.05
+ 优化单片机休眠唤醒机制,防止出现休眠后无法唤醒的情况.
+ 修正设备闹钟定时有几秒误差的bug.
+ 根据新硬件重新调整了设备充电量采集的逻辑,提高效率,降低功耗,充电量采集采用电池电压和充电电流和时间积分来计算.
+ 添加白天和晚上采集间隔的功能,定间隔采集传感器数据并更新屏幕显示.
+ 信号值对应显示的格式修改,修改设备信号值的显示只需信号值相关,与是否成功注册无关系.
+ 修复建立调试连接后,自动重启会导致调试连接不能关闭的bug.
+ 重新整理设备动态内存分配函数的调用,对小内存的分配直接采用栈分配,对底层Flash驱动不再使用动态内存分配.
+ 修正电池电压采集和充电时电池电压采集互相干扰冲突的问题.
+ 更新LCD屏幕驱动,添加对光照/土壤EC和其他数据显示的支持.
+ 添加功能键功能,显示设备注册状态和设备ID,并且添加按键修改注册状态的功能.
+ 添加IIC的光照传感器的支持,添加对光照IC芯片的电源控制.

> Wokankan-L151RC-V0.0.1.2019.11.20
+ IIC总线上SHT20和光照传感器的供电控制修改为统一处理.
+ 按键点亮背光的同时刷新一次传感器轮显.
+ 上电log输出添加app版本号输出.

> Wokankan-L151RC-V0.0.1.2019.11.26
+ 扩充部分AT指令的缓存数组,提高对较长的域名等信息的兼容性.
+ 在退出TCP连接时重新校正AT指令处理函数的额指针,提高AT指令处理函数的健壮性.

> Wokankan-L151RC-V0.0.1.2019.11.28
+ 触发充电显示的电流值由之前的50修改为5ma,充电电流大于5ma则显示正在充电.

> Wokankan-L151RC-V0.0.1.2019.11.29
+ 修复自动重启时rtc发生中断无法处理的bug.

> Wokankan-L151RC-V0.0.1.2019.12.04
+ 修改LCD屏土壤湿度上下限指示驱动函数,屏幕厂家更新他们错误的屏幕图纸.
+ 根据移动的建议,针对连接MQTT服务器失败的情况,修改MQTT服务器的配置指令为系统每次运行只配置一次,不再重复配置.

> Wokankan-L151RC-V0.0.1.2019.12.06
+ 设备自动重启时添加对充电异常报警的保存和恢复处理.

> Wokankan-L151RC-V0.0.1.2019.12.07
+ 设备正常采集轮显传感器数据的间隔,添加中心修改设置时马上重新计算间隔的机制.

> Wokankan-L151RC-V0.0.1.2019.12.28
+ 针对模组干扰导致屏幕背光闪烁的问题,通过软件优化,在网络通讯时暂时关闭背光控制引脚的低功耗模式来解决.
+ 添加模组一种通讯指令完成后进行下一种通讯指令之前的延迟.

> Wokankan-L151RC-V0.0.1.2020.01.03
+ 设备定位添加基站定位的功能,优化定位处理,综合处理GPS和基站定位数据,尽量不上报定位故障.
+ 根据移动建议,部分AT指令添加了延迟保证命令执行的稳定.
+ 固件升级添加对硬件版本号的校验,对平台下发的硬件版本与本设备不同的固件不会执行升级.

> Wokankan-L151RC-V0.0.1.2020.01.09
+ 优化定位算法逻辑,在设备未成功获取GPS定位时,判断基站与GPS定位数据的距离,不大于10公里时可以采用GPS数据,否则使用基站数据.

> Wokankan-L151RC-V0.0.1.2020.01.17
+ 充电时采集的电池电压校正修改为充电电流比较大时再进行电池电压的校正.

> Wokankan-L151RC-V0.0.1.2020.01.18
+ 解决设备充电时,采集电池电压偏低导致显示电量异常的问题.
+ 将充电量统计间隔修改为10秒一次.
+ 恢复充电电流比较小时再进行电池电压的校正的处理.

> Wokankan-L151RC-V0.0.1.2020.01.20
+ 修复屏幕显示故障代码位置显示的错误的数字的bug.
+ 将获取的基站定位值进行一次坐标系转换,转为GPS坐标系上报便于中心处理.

> Wokankan-L151RC-M6313-V0.0.1.2020.02.10
大版本改动,使用模组TCP,采用新版阿里SDK,使用SDK内置MQTT客户端实现连接物联网平台.
+ 硬件版本控制电阻宏定义修改,针对适配G500的程序硬件版本定义为H0002硬件版本电阻为91K1%精度,适配M6313的程序硬件版本仍旧为H0001版本电阻为100K1%精度不变.
+ 针对此大版本软件,定义软件版本号最高位数字为1,例如M6313版本软件为H0001S10000001
+ 针对TCP连接方式,采用新的MQTT连接建立控制逻辑,将MQTT控制与底层模组驱动进行了分离,便于适配新的模组.
+ 对显示模块的启动逻辑进行修改简化,降低功耗.
+ 对部分模块之间相互的控制逻辑重新梳理进行简化.
+ 系统上报控制显示时钟更新等需要计时的功能不再使用闹钟控制修改为统一使用周期唤醒计时器,简化逻辑便于维护.
+ 调整系统周期唤醒间隔为10秒一次,降低系统运行功耗.
+ 根据厂家提供的定制电池的测试数据,采用新的电池容量对应的电压值,并将空格电压与低电压报警电压统一为容量的8%.
+ 采用新的GPS数据处理机制,综合处理基站定位与GPS定位信息,定位信息全部采用浮点数传递缓存,EEP仍旧采用字符串存储.
+ 结合阿里工单客服,修改SDK建立MQTT成功后的上报机制,降低deviceInfo的上报次数,降低流量消耗,降低功耗.
+ 统一规范了日志输出格式,大大提高日志信息的价值,对SDK输出的日志格式也进行了处理,屏蔽了无效的头字节.
+ 沃看看APP迁移到STM32CubeIDE进行开发,针对gcc编译器部分警告进行了修改.
+ 云平台推送的固件与当前固件版本完全相同时不进行升级.
+ 对MQTT连接发生错误时添加对OTA句柄的去初始化,防止多次MQTT连接失败堆溢出死机的问题.

> Wokankan-L151RC-M6313-V0.0.1.2020.02.12
+ 添加了GPRS或MQTT建立失败时,满足特定条件时重试一次的机制.
+ 添加了传输数据TCP连接建立失败时重试三次的机制.
+ 修复了驻网失败时上报未定义错误的bug.

> Wokankan-L151RC-M6313-V0.0.1.2020.02.18
+ 添加向中心Pub消息的ACK等待监测机制,超时未接到平台ACK时启动重发.
+ publish处理模块相应的添加对ACK等待的延迟,未发送完成或等待ACK回复时不关闭publish处理模块.
+ 添加SDK中MQTT特殊事件的回调函数,处理用户需要的MQTT事件.
+ 针对M6313H02S09固件QIACT超时的问题AT流程修改为CGACT激活网络.

> Wokankan-L151RC-M6313-V0.0.1.2020.02.19
+ 针对日志中出现的AT发送指令回复信息被打断的特殊情况修改解析前缀.例:A+RECEIVE: 0, 5T+QISEND=0,97
+ 针对日志中出现的网络波动导致socket断开的情况添加模块尝试关闭socket失败时对SDK连接句柄与socket的关系清除.(防止出现错误的一个fd对应多个socket编号的情况)
+ 关闭用户pub超时重发,修改为使用SDK内部的QOS1的重发机制,用户侧仅仅监测平台ACK,MQTT连接超时时间采用宏定义,pub重发超时也采用宏定义.

> Wokankan-L151RC-M6313-V0.0.1.2020.02.27
+ 修改系统设置初始化参数,白天间隔修改为9-17,白天采集间隔修改为3600
+ 修复系统上报间隔控制时间错误的bug,修改sSysTime为非BCD码格式.

> Wokankan-L151RC-M6313-V0.0.1.2020.02.28
+ 优化白天上报间隔的处理,例如9-17,17.30不再属于白天.

> Wokankan-L151RC-Camera-V0.0.1.2020.03.25
大版本升级,添加拍照上传功能.
+ 使用模组tcp连接服务器,按照http协议组建图片包并上传.
+ 添加摄像头的驱动,允许平台选择,设置拍照参数,并进行拍照,通过拍照流程模块控制取包组建http包,并发包,如此循环,将整个图片所有的数据上传到云平台.
+ M6313驻网AT指令恢复之前使用的QIACT指令,便于通讯结束调用DEACT对TCP协议栈进行去初始化操作.
+ 添加拍照上传部分的各种错误代码信息,上报以及屏幕错误代码展示.
+ 添加了拍照参数,拍照策略等参数的处理,jsonarray组包上报,校验,存储,初始化等配套功能的代码.
+ 重新梳理了上报流程,精简优化了控制代码,使参数上报更加清晰便于维护.
+ 重新梳理了平台设置参数的处理,添加对复杂jsonarray的解析,实现对拍照策略的设置存储.
+ 优化了去除所有json参数的解析isNULL判断,精简为只判断参数是否确定是对应的类型.提高参数解析的速度,减小代码量.
+ 在json解析中添加了通过packettype字段判断设置包类型然后再调用对应的解析函数的方法,提高对多种类型设置包的解析效率.
+ 迁徙cube配置项目到cubeide内置的最新版本,即IOC文件中的MxCube.Version=5.6.0,MxDb.Version=DB.5.0.60
+ 针对http的数据处理功能,在M6313模组驱动中添加了模组接受的TCP数据是否需要交给阿里SDK处理的预处理函数.
+ 添加了开机状态下,按键触发蜂鸣器鸣叫五声松手触发一次拍照上传的功能.
+ 为了便于开发调试,产品定义中添加了Flow_Water_TJ产品.
+ 为了减小项目代码量,将所有参数的字符串以字符串数组形式在StringSettingData.c文件中进行了定义并在对应头文件进行了声明,方便各个函数复用.
+ MQTT流程控制中,结束上报时添加是否需要拍照上传的判断,针对上报结束后马上拍照上传的情况,不对模组进行断电,减少搜网时间.
+ 因为土壤传感器和摄像头都使用485AB总线,因此在拍照时不允许进行传感器模块运行,同样道理,在拍照时不允许MQTT上报模块运行.在MQTT模块start函数和Sensor模块start函数中都添加了类似的阻塞判断.
同样的道理,如果这两个模块正在运行那么拍照模块也会等待这两个模块运行结束再开始执行逻辑.

> Wokankan-L151RC-Camera-V0.0.1.2020.03.26
+ 针对添加摄像头的沃看看设备,将硬件版本号定为H0003,版本电阻定为82K.
+ 修复设置拍照策略时存储错误的一个bug,该bug导致设置的拍照策略重启后丢失或错误.
+ 修复照片传输错误时故障代码应该是73结果显示72的bug.
+ 优化M6313底层发送驱动,再发送超过512字节的数据时防止出现SDK处理数组溢出导致的SEND OK不能识别的问题,并提高发送处理的效率.模组底层串口读取驱动允许缓存数组为NULL来丢失底层串口数据.
+ http等待服务器回复的时长增加到10秒.
+ 将每次拍照上传照片的大小修改为比较大,提高传输效率,节省功耗.
+ 修复充电异常报警触发的bug,该bug会导致设备一旦触发过异常报警那么任意一天(按照原设计应该是7天)充电少于特定值就会马上触发充电异常报警.
+ 修复图片上传过程中传输中断后摄像头控制状态机不能恢复初始状态的bug.拍照上传模块中,类似的状态机被中断不能恢复初始状态的bug都进行了修复.
+ 为了防止数据太多导致模组与基站通讯数据阻塞丢失,在底层模组发送数据之前先判断是否存在未被服务器接受的数据,存在服务器未接受的数据就等待服务器接受完成再发送或者超时返回错误.
+ 优化M6313模组socket数据接受处理回调函数,提高了接收到小数据量数据的处理效率.
+ 添加了对设备底层boot的版本号的采集功能,通过在eeprom中添加一个版本号标识来实现.
+ 添加MQTT上报模块模组启动上报瞬间缓存GPS采集控制状态,防止上报过程中触发GPS采集导致的异常,完成采集后清空控制状态和控制缓存状态.
+ 针对上报间隔设置很大(超过重启时间减去0点)可以导致的当天充电量不清空和每周一GPS定位不采集的bug,添加了一次上报特殊处理.
+ 添加一条平台下发PacketType为4时,下次设备到达上报间隔进行GPS定位的功能.
+ 获取定位的时长针对采用无源天线信号略差的情况修改为1秒一次尝试60次(之前30次).
+ 修改获取基站定位的等待超时,由之前的30秒修改为数据手册的40秒,提高处理稳定性.
+ 优化GPS回复中经纬度的解析,提高稳定性和解析效率.
+ 重构RS485传感器问讯控制逻辑,提高可读性可维护性,提高问讯效率.
+ 优化旧代码中定时实现机制,由定时器变量定时处理修改为调用HAL_GetTick()系统函数获取,提高中断处理效率.
+ 重写设备获取电源电压的函数,控制设备每定间隔获取一次电源电压,在获取电压时如果摄像头或模组已经供电则等待这些模组结束再测量,如果电量或充电状态发生变化再更新屏幕显示以降低功耗.
+ 针对旧版和新版PCB,在LCD电量显示,充电监测的计算公式,IIC设备的电源控制,GPRS模组的供电控制,Flash供电控制等等,新旧电路板按照获取的硬件版本进行了兼容.
+ 为了兼容新旧电路板,在cubeide中配置设备大多数引脚初始为高阻态,在对应引脚或模块运行时再具体控制端口进入工作状态.
+ 系统参数上报添加bootVersion字符串,可以从平台了解设备的底层boot版本.
+ 按照AT指令手册的说明将定位秒定功能设置参考经纬度修改为小数点后6位(之前是7位).

> Wokankan-L151RC-Camera-V0.0.1.2020.04.11<span id="APP-V0.0.1.2020.04.11"></span>
+ 优化GPS定位流程,在开始获取基站定位时就打开模组GNSS功能,提高定位成功率.
+ 在使能EPO功能后发送一次AT指令触发EPO再开始查询定位数据.
+ 修复0点特殊时间上报时没有上报传感器数据的bug.
+ MQTT QOS=1的超长信息未能处理回复,导致的每次设备上线平台都重复推送的问题,添加超长数据触发MQTT清除一次会话的机制.
+ 增加设备第一次连接网络失败后QPOWD重启模组等待时间10->30秒
+ 控制模组进入休眠状态的指令顺序调整,防止模组控制模块重入导致的流程控制混乱.
+ 修改平台设置包时间戳处理机制,允许处理相同时间戳的两个包.
+ 查询驻网状态和AT指令回复两个函数优化处理模组回复的机制,防止出现第一次成功回复没有触发的情况.查询基站定位的函数流程做了一个小更改.

> Wokankan-L151RC-Camera-V0.0.1.2020.04.16<span id="APP-V0.0.1.2020.04.16"></span>
+ 通过宏定义来切换M6313和G500的模组驱动.
+ 参考最近几天测试M6313AT的处理更新G500的驱动版本.
+ 修改硬件判断之后的处理,默认将非H0001版本的硬件识别为新的电路板,这是为了兼容测试H0002(G500模组加PCB.06).
+ M6313的驱动中添加对COMMAND NO RES的处理,对特殊情况AT指令无回复时提高了处理效率.
+ G500发送指令根据回复处理是否进入阻塞.
+ 是否正在充电的状态监测添加了针对电路板版本进行处理的逻辑,对PCB0.6增加状态监测时长.
+ 透传处理函数提高处理效率.
+ 添加G500和M6313打开GPRS耗费时间异常时断电重启模组重试的机制,添加G500激活网络失败的错误代码记录.
+ 设备报警上报修改为与传感器数据相同的上报机制.
+ G500模组在发送后超时没有回复指定的MIPPUSH后尝试重发一次.
+ 取消充电量统计,充电状态显示直接取决于充电芯片的状态.
+ 充电异常报警修改为统计每天0点的电池电压来进行处理.
+ 修改设备上报的属性的名称,缩短名称,降低流量消耗以及流量的消耗.
+ 当设置的设备上报间隔小于等于特定值(MQTTNotCloseRepInvl_1sCnt)则设备与服务器进入长连接模式.
+ 在自动重启,上报控制,发布消息处理,设备电压监测,MQTT连接管理,错误代码处理等模块添加了对长连接模式的支持.
+ 添加自动重启对是否需要采集一次GPS地址信息的使能保存,针对长连接模式使用.

> Wokankan-L151RC-Camera-V0.0.1.2020.04.24<span id="APP-V0.0.1.2020.04.24"></span>
+ 修复电流监测功能重构后设备标志位出现问题导致的设备无法休眠bug.
+ 修复长连接模式下设备没有按照设计在自动重启后采集一次GPS定位信息的bug.

> Wokankan-L151RC-Camera-V0.0.1.2020.04.28<span id="APP-V0.0.1.2020.04.28"></span>
+ 修复拍照时模组状态修改与MQTT上报模组状态改变的逻辑处理漏洞导致39未定义错误的bug.
 
---

## 更新说明-BootLoader部分

> Wokankan-L151RC-Boot-V0.0.1.2019.06.30
+ 沃看看项目专用BootLoader,提交测试第一版.

> Wokankan-L151RC-Boot-V0.0.1.2019.07.03
+ 为了方便查找问题,不在BootLoader中开启读保护功能,在用户程序中开启.

> Wokankan-L151RC-Boot-V0.0.1.2019.07.29
+ 更新底层片上EEPROM驱动函数,在进行写操作之前清除上一次的错误标志位.

> Wokankan-L151RC-Boot-V0.0.1.2019.09.18
+ 更新lcd底层显示驱动,适配增加电导率和光照度的新屏幕.
+ 更新Flash底层驱动,去除动态分配内存的相关内容,提高稳定性和效率.
+ 上电log输出添加BootLoader版本号输出.

> Wokankan-L151RC-BootLoader-V0.0.2.2020.03.31
+ 在单片机EEP中存储BootLoader版本号标识,以便于最新的用户APP识别BootLoader版本.
+ 重新整理程序的log输出,进行规范化.
+ 更新显示底层驱动.
+ 重新整理项目函数的功能,将部分功能划分函数重新划分文件,OTA相关功能函数移动到OTA模块,提高程序可读性.
+ 添加对设备硬件版本号检测的相关函数,2048参考电压电源控制,AD模块,DMA模块,硬件版本检测部分功能函数.
+ 根据监测的不同硬件版本,在lcd初始化以及flash初始化函数中添加了不同硬件版本对应的处理.

> Wokankan-L151RC-BootLoader-V0.0.2.2020.04.16<span id="boot-V0.0.2.2020.04.16"></span>
+ 针对可能采用的新电路板硬件加G500的组合,定义硬件版本为H0002,修改程序只将H0001硬件处理为旧版硬件,其他的硬件版本都处理为新版硬件.
+ BootLoader版本标识设置为(0xAA550002).
+ 备份固件处一个错误的Log输出提示,备份成功却有Error提示.

---
